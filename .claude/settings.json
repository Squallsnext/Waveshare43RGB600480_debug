{
  "context-safety": {
    "checkpoint-on-exit": true,
    "handoff-on-budget-low": true,
    "commit-gate-enabled": true
  },
  "hooks": {
    "session-start-hook": {
      "enabled": true,
      "command": "make session-start",
      "description": "On session init: verify repo, git status/log, budget check, read STATE+TODO+HANDOFF, output only (Phase+Next), (Config), (NextFile)"
    },
    "stop-hook": {
      "enabled": true,
      "command": "make checkpoint",
      "description": "Before session end: update STATE.md + TODO.md with delta + HANDOFF if budget low"
    },
    "post-tool-use-hook": {
      "enabled": true,
      "description": "On tool execution: count tool-calls and check context budget; write CONTEXT_BUDGET_LOW flag if threshold exceeded; trigger make handoff on demand"
    }
  },
  "documentation-gates": {
    "before-commit": [
      "docs/STATE.md (must be updated)",
      "docs/TODO.md (must be updated)",
      "Build must be PASSING or status explained"
    ]
  },
  "restart-sequence": {
    "1-status": "git status && git log -1 --oneline",
    "2-budget": "make check-budget",
    "3-state": "cat docs/STATE.md | head -30",
    "4-todos": "cat docs/TODO.md | head -20",
    "5-handoff": "cat docs/HANDOFF.md (if session interrupted)"
  }
}
