{
  "context-safety": {
    "checkpoint-on-exit": true,
    "handoff-on-budget-low": true,
    "commit-gate-enabled": true
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "make session-start",
            "description": "Load full context: git status/log, budget check, STATE+TODO+HANDOFF"
          }
        ]
      },
      {
        "matcher": "resume",
        "hooks": [
          {
            "type": "command",
            "command": "make session-start",
            "description": "Reload context on resume"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "make checkpoint",
            "description": "Update STATE.md + TODO.md deltas before session end"
          }
        ]
      }
    ]
  },
  "documentation-gates": {
    "before-commit": [
      "docs/STATE.md (must be updated)",
      "docs/TODO.md (must be updated)",
      "Build must be PASSING or status explained"
    ]
  },
  "restart-sequence": {
    "1-status": "git status && git log -1 --oneline",
    "2-budget": "make check-budget",
    "3-state": "cat docs/STATE.md | head -30",
    "4-todos": "cat docs/TODO.md | head -20",
    "5-handoff": "cat docs/HANDOFF.md (if session interrupted)"
  }
}
